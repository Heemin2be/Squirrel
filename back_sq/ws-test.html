<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>WebSocket í…ŒìŠ¤íŠ¸</title>
</head>
<body>
<h1>WebSocket í…ŒìŠ¤íŠ¸</h1>

<div>
    <h2>ë¡œê·¸</h2>
    <pre id="log"></pre>
</div>

<!-- âœ… stomp.jsë§Œ ì‚¬ìš© -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>

<script>
    const logEl = document.getElementById("log");
    const log = (msg) => {
      console.log(msg);
      logEl.textContent += msg + "\n";
    };

    // âœ… ìˆœìˆ˜ WebSocketìœ¼ë¡œ ì„œë²„ /ws ì—”ë“œí¬ì¸íŠ¸ì— ì—°ê²°
    const socket = new WebSocket("ws://localhost:8080/ws");
    const stompClient = Stomp.over(socket);

    stompClient.connect({}, (frame) => {
      log("âœ… ì—°ê²° ì„±ê³µ: " + frame);

      stompClient.subscribe("/topic/new-order", (message) => {
        log("ğŸ“¦ new-order: " + message.body);
      });

      stompClient.subscribe("/topic/order-status", (message) => {
        log("ğŸ”„ order-status: " + message.body);
      });

      stompClient.subscribe("/topic/menu-update", (message) => {
        log("ğŸ½ menu-update: " + message.body);
      });
    }, (error) => {
      log("âŒ ì—°ê²° ì‹¤íŒ¨: " + error);
    });
</script>
</body>
</html>
